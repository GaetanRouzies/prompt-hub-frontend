<p-card>
  <div class="flex align-items-center justify-content-between gap-2 mb-2">
    <div>
      <h3 class="m-0">{{ prompt().title }}</h3>
      <span class="text-color-secondary text-sm">Par &#64;{{ prompt().author.username }}</span>
    </div>
    <div class="flex gap-2">
      @if (canEdit) {
        <p-button
          [routerLink]="['/prompts', prompt().id, 'edit']"
          icon="pi pi-pencil"
          size="small"
          text="true"
        />
      }
      <p-button
        icon="pi pi-copy"
        text="true"
        size="small"
        title="Copier le prompt"
        (onClick)="copyToClipboard()"
      />
    </div>
  </div>
  <textarea
    pTextarea
    class="w-full text-sm mb-2"
    [rows]="8"
    [value]="prompt().content"
    readonly
  ></textarea>
  <div class="flex align-items-center gap-2 justify-content-between">
    <p-tag [value]="prompt().category.name" severity="secondary" />

    <div class="flex align-items-center gap-2">
      <p-button
        icon="pi pi-thumbs-up"
        size="small"
        [severity]="displayUserVote() === 'up' ? 'primary' : 'secondary'"
        (onClick)="upvote()"
      />
      <span class="font-semibold">{{ displayScore() }}</span>
      <p-button
        icon="pi pi-thumbs-down"
        size="small"
        [severity]="displayUserVote() === 'down' ? 'primary' : 'secondary'"
        (onClick)="downvote()"
      />
    </div>
  </div>
</p-card>
