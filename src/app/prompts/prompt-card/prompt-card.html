<p-card>
  <div class="flex flex-column gap-2">
    <div class="flex align-items-center justify-content-between gap-2 flex-wrap">
      <h3 class="m-0 text-lg font-semibold">{{ prompt().title }}</h3>
      @if (category(); as cat) {
        <p-tag [value]="cat.name" severity="secondary" />
      }
    </div>
    <div class="prompt-content-wrapper">
      <textarea
        pTextarea
        class="prompt-textarea w-full text-sm"
        [rows]="expanded() ? 16 : 4"
        [ngModel]="prompt().content"
        readonly
      ></textarea>
      <div class="flex align-items-center gap-1 mt-1">
        <p-button
          [label]="expanded() ? 'RÃ©duire' : 'Lire la suite'"
          [icon]="expanded() ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"
          [iconPos]="expanded() ? 'left' : 'right'"
          class="p-button-text p-button-sm"
          (onClick)="toggleExpanded()"
        />
        <p-button
          icon="pi pi-copy"
          class="p-button-text p-button-sm"
          title="Copier le prompt"
          (onClick)="copyToClipboard()"
        />
      </div>
    </div>
    <div class="flex align-items-center justify-content-between gap-2 flex-wrap">
      <div class="flex align-items-center gap-2">
        <span class="font-semibold">{{ score() }}</span>
        <span class="text-color-secondary text-sm">score</span>
        <p-button
          icon="pi pi-thumbs-up"
          [loading]="voting"
          (onClick)="upvote()"
        />
        <p-button
          icon="pi pi-thumbs-down"
          [loading]="voting"
          (onClick)="downvote()"
        />
      </div>
      <p-button [routerLink]="['/prompts', prompt().id, 'edit']" label="Modifier" icon="pi pi-pencil" class="p-button-sm"></p-button>
    </div>
  </div>
</p-card>
